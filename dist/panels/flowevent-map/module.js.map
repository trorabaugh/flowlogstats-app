{"version":3,"sources":["../../../src/panels/flowevent-map/module.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,O;;AACC,e,kBAAA,S;AACA,mB,kBAAA,a;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQR,oBAAc;AACZ,cAAM,oDADM;AAEZ,eAAO;AAFK,OAAd;;2BAKM,gB;;;;;AAGJ,kCAAY,MAAZ,EAAoB,SAApB,EAA+B,SAA/B,EAA0C,UAA1C,EAAsD;AAAA;;AAAA,0GAC9C,MAD8C,EACtC,SADsC;;AAEpD,gBAAK,UAAL,GAAkB,UAAlB;AACA,gBAAK,SAAL,GAAiB,SAAjB;;AAEA,gBAAK,MAAL,GAAc,IAAd;AACA,gBAAK,cAAL,GAAsB,gBAAtB;AACA,gBAAK,eAAL,GAAuB,iBAAvB;AAPoD;AAQrD;;;;8CAEmB;AAClB,gBAAI,CAAE,KAAK,MAAX,EAAmB;AACjB;AACD;AACD,gBAAI,KAAK,MAAL,CAAY,QAAZ,CAAqB,IAArB,KAA8B,CAAlC,EAAqC;AACnC,mBAAK,cAAL,GAAsB,aAAtB;AACA;AACD;AACD,gBAAI,KAAK,MAAL,CAAY,QAAZ,CAAqB,IAArB,IAA6B,CAAjC,EAAoC;AAClC,mBAAK,cAAL,GAAsB,cAAtB;AACA;AACD;;AAED,iBAAK,cAAL,GAAsB,cAAtB;AACA;AACD;;;+CAEoB;AACnB,gBAAI,CAAE,KAAK,MAAX,EAAmB;AACjB;AACD;AACD,gBAAI,KAAK,MAAL,CAAY,SAAZ,CAAsB,IAAtB,KAA+B,CAAnC,EAAsC;AACpC,mBAAK,eAAL,GAAuB,cAAvB;AACA;AACD;AACD,gBAAI,KAAK,MAAL,CAAY,SAAZ,CAAsB,IAAtB,IAA8B,CAAlC,EAAqC;AACnC,mBAAK,eAAL,GAAuB,eAAvB;AACA;AACD;;AAED,iBAAK,eAAL,GAAuB,eAAvB;AACA;AACD;;;oCAES;AACR,gBAAI,CAAE,KAAK,MAAX,EAAmB;AACjB,qBAAO,KAAP;AACD;AACD,gBAAI,KAAK,MAAL,CAAY,SAAZ,CAAsB,IAAtB,KAA+B,CAAnC,EAAsC;AACpC,qBAAO,KAAP;AACD;AACD,gBAAI,KAAK,MAAL,CAAY,QAAZ,CAAqB,IAArB,KAA8B,CAAlC,EAAqC;AACnC,qBAAO,KAAP;AACD;;AAED,mBAAO,IAAP;AACD;;;oCACS,CAET;;;uCACY;AACX,gBAAI,OAAO,IAAX;AACA,iBAAK,UAAL,CAAgB,GAAhB,CAAoB,kDAApB,EAAwE,IAAxE,CAA6E,UAAS,MAAT,EAAiB;AAC5F,kBAAI,YAAY,EAAhB;AACA,gBAAE,OAAF,CAAU,MAAV,EAAkB,UAAS,CAAT,EAAY;AAC5B,0BAAU,EAAE,MAAZ,IAAsB,CAAtB;AACD,eAFD;AAGA,mBAAK,MAAL,GAAc,SAAd;AACA,mBAAK,iBAAL;AACA,mBAAK,kBAAL;AACD,aARD;AASD;;;;QA1E4B,S;;AA6E/B,uBAAiB,WAAjB,GAA+B,kEAA/B;;2BAGE,gB","file":"module.js","sourcesContent":["import _ from 'lodash';\nimport {PanelCtrl} from 'app/plugins/sdk';\nimport {loadPluginCss} from 'app/plugins/sdk';\n//import 'plugins/flowlogstats-app/panels/flowevent-map/country_info.js';\n//import 'plugins/flowlogstats-app/panels/flowevent-map/markerclusterer_compiled.js';\n//import 'plugins/flowlogstats-app/panels/flowevent-map/utils.js';\n//import 'https://s3.amazonaws.com/data.flowlog-stats.com/dashboard/demo_user_1/111111111/2016-04-06/country_data/country_data.js';\n//import 'https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-rc1/jquery.min.js';\n//import 'https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js';\n\nloadPluginCss({\n  dark: 'plugins/flowlogstats-app/css/flowlogstats-dark.css',\n  light: 'plugins/flowlogstats-app/css/flowlogstats-light.css'\n});\n\nclass FlowEventMapCtrl extends PanelCtrl {\n\n  /** @ngInject */\n  constructor($scope, $injector, $location, backendSrv) {\n    super($scope, $injector);\n    this.backendSrv = backendSrv;\n    this.$location = $location;\n\n    this.quotas = null;\n    this.endpointStatus = \"scopeEndpoints\";\n    this.collectorStatus = \"scopeCollectors\";\n  }\n\n  setEndpointStatus() {\n    if (! this.quotas) {\n      return;\n    }\n    if (this.quotas.endpoint.used === 0) {\n      this.endpointStatus = \"noEndpoints\";\n      return;\n    }\n    if (this.quotas.endpoint.used >= 1) {\n      this.endpointStatus = \"hasEndpoints\";\n      return;\n    }\n    //default.\n    this.endpointStatus = \"hasEndpoints\";\n    return;\n  }\n\n  setCollectorStatus() {\n    if (! this.quotas) {\n      return;\n    }\n    if (this.quotas.collector.used === 0) {\n      this.collectorStatus = \"noCollectors\";\n      return;\n    }\n    if (this.quotas.collector.used >= 1) {\n      this.collectorStatus = \"hasCollectors\";\n      return;\n    }\n    //default.\n    this.collectorStatus = \"hasCollectors\";\n    return;\n  }\n\n  allDone() {\n    if (! this.quotas) {\n      return false;\n    }\n    if (this.quotas.collector.used === 0) {\n      return false;\n    }\n    if (this.quotas.endpoint.used === 0) {\n      return false;\n    }\n    //default.\n    return true;\n  }\n  refresh() {\n\n  }\n  refreshOLD() {\n    var self = this;\n    this.backendSrv.get('api/plugin-proxy/flowlogstats-app/api/org/quotas').then(function(quotas) {\n      var quotaHash = {};\n      _.forEach(quotas, function(q) {\n        quotaHash[q.target] = q;\n      });\n      self.quotas = quotaHash;\n      self.setEndpointStatus();\n      self.setCollectorStatus();\n    });\n  }\n}\n\nFlowEventMapCtrl.templateUrl = 'public/plugins/flowlogstats-app/panels/flowevent-map/module.html';\n\nexport {\n  FlowEventMapCtrl as PanelCtrl\n};\n"]}